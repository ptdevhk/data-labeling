# https://caddyserver.com/docs/caddyfile/concepts

:5002 {
	# API routes - proxy to backend (order matters - these must come first)
	# This handles /api/*, /api/docs, /api/redoc, /api/openapi.json
	handle /api* {
		reverse_proxy backend:5001
	}
	handle /token {
		reverse_proxy backend:5001
	}
	handle /health {
		reverse_proxy backend:5001
	}

	# Serve frontend static files
	handle {
		root * /web/dist
		encode zstd gzip
		try_files {path} /index.html
		file_server
	}
}
